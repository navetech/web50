{% extends "layout.html" %}

{% block title %}
    Book
{% endblock %}

{% block main %}
    <a href="{{ url_for('review', book_isbn=book['isbn'], user_id=session['user_id']) }}">Do a Review</a>
    <br>
    
    <br>
    <ul class="list-estilo">
        <li>
            {{ book.title }}
            by
            <a href="{{ url_for('books_by_author', author=book['author']) }}">{{ book.author }}</a>
            in
            <a href="{{ url_for('books_in_year', year=book['year']) }}">{{ book.year }}</a>
            </li>
        <li>ISBN: {{ book.isbn }}</li>
    </ul>

    {% if ratings_count > 0 %}
        <br>
        <ul class="list-estilo">
            <li>Average Rating: {{ average_rating }}</li>
            <li>Ratings Count: {{ ratings_count }}</li>
        </ul>
    {% endif %}

    {% if reviews %}
        <br>
        <ul class="list-estilo">
            <li>Comments Count: {{ comments_count }}</li>
            <li>Reviews Count: {{ reviews_count }}</li>
        </ul>
    {% endif %}

    <br>
    {% for review in reviews %}
        <br>
        <ul class="list-estilo">
            <li>by {{ review.reviewer }} on {{ review.datetime }}</li>
                
            {% if review.rating %}
                <li>Rating: {{ review.rating }}</li>
            {% else %}
                <li>No rating</li>
            {% endif %}
        </ul>

        {% if review.comment %}
<!--
            <br>
            <pre>{{ review.comment }}</pre>
-->
            <textarea class="comment-out" readonly>
                {{ review.comment }}
            </textarea>
        {% else %}
            No comment
        {% endif %}

        <br>

    {% endfor %}

{% endblock %}
